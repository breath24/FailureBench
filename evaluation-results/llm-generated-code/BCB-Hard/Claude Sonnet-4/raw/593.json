{
  "task_id": "BigCodeBench/593",
  "instruct_prompt": "Generates traffic data for different vehicle types over a specified number of hours, saves the data to a CSV file with coloumns 'Time', 'Car', 'Bus', 'Truck', and 'Bike', and plots the data in a line chart with 'Time' on x-axis and 'Vehicle Count' on y-axis.\nThe function should output with:\n    tuple: Path to the CSV file and the matplotlib axes object of the line plot.\nYou should write self-contained code starting with:\n```\nimport csv\nimport os\nfrom datetime import datetime\nfrom random import randint\nimport matplotlib.pyplot as plt\nimport pandas as pd\n# Constants\nVEHICLE_TYPES = ['Car', 'Bus', 'Truck', 'Bike']\nOUTPUT_DIR = './output'\ndef task_func(hours, output_dir=OUTPUT_DIR):\n```",
  "llm_response": "import csv\nimport os\nfrom datetime import datetime\nfrom random import randint\nimport matplotlib.pyplot as plt\nimport pandas as pd\nVEHICLE_TYPES = ['Car', 'Bus', 'Truck', 'Bike']\nOUTPUT_DIR = './output'\ndef task_func(hours, output_dir=OUTPUT_DIR):\n    \"\"\"\n    Generates traffic data for different vehicle types over a specified number of hours,\n    saves the data to a CSV file, and plots the data in a line chart.\n    \n    Args:\n        hours (int): Number of hours to generate traffic data for\n        output_dir (str): Directory to save the CSV file\n    \n    Returns:\n        tuple: Path to the CSV file and the matplotlib axes object of the line plot\n    \"\"\"\n    # Create output directory if it doesn't exist\n    os.makedirs(output_dir, exist_ok=True)\n    \n    # Generate timestamp for unique filename\n    timestamp = datetime.now().strftime(\"%Y%m%d_%H%M%S\")\n    csv_filename = f\"traffic_data_{timestamp}.csv\"\n    csv_path = os.path.join(output_dir, csv_filename)\n    \n    # Generate traffic data\n    traffic_data = []\n    for hour in range(hours):\n        row = {\n            'Time': hour,\n            'Car': randint(10, 100),\n            'Bus': randint(1, 20),\n            'Truck': randint(5, 30),\n            'Bike': randint(2, 50)\n        }\n        traffic_data.append(row)\n    \n    # Save data to CSV file\n    with open(csv_path, 'w', newline='') as csvfile:\n        fieldnames = ['Time', 'Car', 'Bus', 'Truck', 'Bike']\n        writer = csv.DictWriter(csvfile, fieldnames=fieldnames)\n        writer.writeheader()\n        writer.writerows(traffic_data)\n    \n    # Read data using pandas for plotting\n    df = pd.read_csv(csv_path)\n    \n    # Create line plot\n    fig, ax = plt.subplots(figsize=(10, 6))\n    \n    # Plot each vehicle type\n    for vehicle_type in VEHICLE_TYPES:\n        ax.plot(df['Time'], df[vehicle_type], marker='o', label=vehicle_type, linewidth=2)\n    \n    # Customize the plot\n    ax.set_xlabel('Time (Hours)', fontsize=12)\n    ax.set_ylabel('Vehicle Count', fontsize=12)\n    ax.set_title('Traffic Data Over Time', fontsize=14, fontweight='bold')\n    ax.legend()\n    ax.grid(True, alpha=0.3)\n    \n    # Set x-axis to show all hours\n    ax.set_xticks(range(0, hours, max(1, hours//10)))\n    \n    plt.tight_layout()\n    plt.show()\n    \n    return csv_path, ax",
  "model": "claude-sonnet-4"
}